params {
  config_profile_description = 'Institut Pasteur Maestro cluster profile'
  config_profile_url = 'https://confluence.pasteur.fr/spaces/viewspace.action?key=FAQA'
  config_profile_contact = 'Pierre Luisi (@pierrespc)'
}

singularity {
  enabled = true
  autoMounts = true
  runOptions = '--home $HOME:/home/$USER --bind /pasteur'
}

process {
  executor = 'slurm'
  scratch = false
  queue = 'common'
  clusterOptions = {task.time < 24.h ? '--qos=normal' : '--qos=long'}
}

params {
  igenomes_ignore = true
  igenomesIgnore = true
  max_memory = {task.time < 24.h ? 400.GB : 100.GB }
  max_cpus = {task.time < 24.h ? 96 : 5 }
  max_time = {task.time < 24.h ? 24.h : 8760.h }
}
